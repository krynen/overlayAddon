<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="./dat/config.js"></script>
    <script src="./dat/orimg.js"></script>

    <title>OverlayAddon</title>
    <link rel="icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREAAAAAAAAREQAAAAAAEQAAEQAAAAARAAARAAAAABEAABEAAAAAEQAAEQAAAAARAAARAAAAABEAABEAAAAAABERAAAAAAAAEREAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA//8AAOAHAADAAwAAwAMAAMADAADAAwAAwAMAAMADAADAAwAAwAMAAMADAADAAwAA4AcAAP//AAD//wAA">
  </head>
  
  <body>
  <script>!function(){return function e(t,r,a){function n(o,i){if(!r[o]){if(!t[o]){var l="function"==typeof require&&require;if(!i&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[o]={exports:{}};t[o][0].call(u.exports,function(e){return n(t[o][1][e]||e)},u,u.exports,e,t,r,a)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<a.length;o++)n(a[o]);return n}}()({1:[function(e,t,r){t.exports='\x3c!-- 구현된 style 명령어 요소\r\n  zoom : 오버레이의 전체 배율. number\r\n  width : 오버레이드 가로 크기. size(px, %, ...)\r\n--\x3e\r\n\r\n<template id="Description">\r\n  \x3c!-- 모듈 로드 완료시 표시할 메세지 --\x3e\r\n  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAB4CAIAAAA48Cq8AAAACXBIWXMAADXUAAA11AFeZeUIAAADV0lEQVR4nO3dTU7kMBRF4dBiA70MFtU7Ycge2U4PSkIIFVWJ7fN8nZxv1hJUzPMhqR+Uftn+/tuk0f7MXoDOybCEMCwhDEsIwxLCsIQwLCEMSwjDEsKwhDAsIQxLCMMSwrCEMCwhDEsIwxLCsIQwLCEMSwjDEsKwhDAsIQxLCMMSwrCEMCwhDEsIwxLCsIQwLCFeZy+gz+f7ky94+yhZx0NPF3lTuVR+bi93bry2cxAjDt9i//J+KFtt8wq/G77a2rmtE9aQ3drgNY9a5Jf+1U6a2yJhBW7YD8NX+KVnqfPmFv8cC9qw28MOyYtLqsfsuWW/KqT3rP/xL1XVkccPDqtmz3qOcs2q9h0lNazKPWs71pWr2nGsyLDq9+zoEa3q2RHzwsrcs+8yVxi2qrywmr19VLwyD9u/AZi5hb3d0LBtP4by/Z8NFzj0nbk9D172hA+eW1JYR3+ep/v09jH4BNP2aIdibdjgyLkteyncuVtzP4TuvMp0fvtvjznwy363bFj7HZrRg9/U4SeGcH1ziwnr0LatvmcDpc4tJqyTuXz6C4bVsGejroZLq51bRlj5e5l5xQmeW0ZYOh3DEsKwhDCs0S7/evDmMmG5321a55b0WeHpdb6IW+p34zJnLNUyLCEMSwjDEsKwhLhMWMEfq0Vrndtlwipjwdu2GZYgvkFa6O47nCc9w3nGEiIjrKi/8Ly7mMyPU4LnlhEWrfhyc5qrW8cPco2wVC4mLO6sPuXP1ctOWqlziwnrqPp7eGQ+zTqqam7LhrXt+OHnPtf5fA99slUyt6SwGk4Jv21e26buuVvGUQVtRc6t73bczR7MYtZv+c7tmXgSerzCsLklnbGWcI5nWry8sKbsXPMtrHKEzS0vrK18RpmhNEiaW2RYW+GM2g4U22LM3FLD2kpmlHa7vSEy5hYc1kbOaFQWV2tr99zy3m64a+ySiLlP+ZuLp+bNbZGwbvoXRp9gMv/7uxlzWyqsL/n3me2ZIbfawrndC0vqlv3kXcsyLCEMSwjDEsKwhDAsIQxLCMMSwrCEMCwhDEsIwxLCsIQwLCEMSwjDEsKwhDAsIQxLCMMSwrCEMCwhDEsIwxLCsIQwLCEMSwjDEsKwhDAsIQxLCMMSwrCEMCwhDEuI/yJL8XiuTiLZAAAAAElFTkSuQmCC" /><br />\r\n  기본 테마로 모든 로드가 완료되었습니다.\r\n</template>\r\n\r\n<template id="Style">\r\n  \x3c!-- 스타일 --\x3e\r\n  <style type="text/css">\r\n    /* style 명령어 변수를 적용 */\r\n    #Root,\r\n    #ErrorRoot { width:100%; max-width:var(--width); }\r\n    #Root>*,\r\n    #ErrorRoot>* { zoom:var(--zoom); }\r\n\r\n    html { width:100%; height:100%; }\r\n    #Root { position:absolute; bottom:0; right:0; }\r\n    #ErrorRoot { position:absolute; top:0; right:0; background:rgba(0,0,0,.6); }\r\n\r\n    .NormalMessage {\r\n      margin:2px; padding:3px;\r\n      background:rgba(0,0,0,.6); border:1px solid rgba(255,255,255,.6);\r\n    }\r\n    .ErrorMessage { margin:2px 0; padding:3px; }\r\n\r\n    .NormalMessage .NameBadges {\r\n      display:flex;\r\n      background:linear-gradient(to right, rgba(0,0,0,.7), rgba(0,0,0,0));\r\n    }\r\n    .NormalMessage .Name {\r\n      display:flex; flex:1; margin:auto; \r\n      text-shadow:0 0 1px white, 0 0 1px white, 0 0 1px white, 0 0 1px white;\r\n      font-weight:bold;\r\n      color:var(--data-color);\r\n      padding:1px;\r\n    }\r\n    .NormalMessage .Badges { display:flex; }\r\n    .NormalMessage .Badges img { \r\n      margin:auto 1px; height:18px;\r\n      border:1px solid rgba(255,255,255,.6);\r\n    }\r\n\r\n    .Text {\r\n      color:white; padding:2px 1px 1px; text-align:right;\r\n      word-break: keep-all; word-wrap: break-word;\r\n    }\r\n    [data-color-chat="1"] .Text {\r\n      color:var(--data-color);\r\n    }\r\n    .Text [nth:child(n+5)] { display:none; }\r\n\r\n    @keyframes highlight {\r\n      0%, 65%, 75% { outline:none; }\r\n      60%, 70% { outline:2px solid white; }\r\n    }\r\n    [data-Subs], [data-Gift], [data-Raid], [data-Cheer], [data-twip] {\r\n      animation:highlight step-end 2.5s 3;\r\n    }\r\n    .Subs, .Gift, .Raid, .Cheer, .Twip {\r\n      color:white; padding:3px; text-align:center;\r\n    }\r\n\r\n    .Emote { width:56px; }\r\n    [data-emote-only="1"] .Text { text-align:center; }\r\n\r\n    .Cheermote {\r\n      display:inline-block; padding:1px 3px; margin:-1px;\r\n      border:1px solid rgba(255,255,255,.6);\r\n    }\r\n    .Cheermote .CheerImage { height:1rem; }\r\n\r\n    .Orimg {\r\n      max-height:112px;\r\n    }\r\n\r\n    .Video .Image { max-width:100%; text-align:center; }\r\n    .Video .Title,\r\n    .Video .Name { text-align:center; }\r\n\r\n    .Video[data-invalid] .Image,\r\n    .Video[data-invalid] .Name { diaplay:none; }\r\n    .Video[data-invalid] .Title::after {\r\n      content:"Invalid clip";\r\n    }\r\n  </style>\r\n</template>\r\n\r\n\r\n<template id="NormalRoot">\r\n  \x3c!-- 일반 메세지 최상위 Element --\x3e\r\n  <div theme-type="Root" id="Root" class="Root"></div>\r\n</template>\r\n\r\n<template id="ErrorRoot">\r\n  \x3c!-- 디버그 메세지 최상위 Element --\x3e\r\n  <div theme-type="Root" id="ErrorRoot" class="Root"></div>\r\n</template>\r\n\r\n<template id="NormalMessage">\r\n  \x3c!-- NormalRoot의 Root에 추가되는 일반 메세지 템플릿\r\n    Root   : 최상위 element.\r\n      data-name="[이름]" data-color-chat="[색채팅 사용시 1]"이 추가되며\r\n      Head에 따라서 attribute가 더 추가될 수 있음\r\n    Name   : 유저 이름. 스타일 --data-color:"[유저 색상]"이 추가될 수 있음\r\n    Badges : 뱃지 목록. 각 뱃지는 data-type="[이름]" data-tier="[등급]"이 포함된 img element\r\n    Text   : 메세지 문자열. 처리된 이모티콘 등도 포함됨\r\n  --\x3e\r\n  <div theme-type="Root" class="Message NormalMessage">\r\n    <div class="NameBadges">\r\n      <span theme-type="Name" class="Name"></span>\r\n      <span theme-type="Badges" class="Badges"></span>\r\n    </div>\r\n    <virtual theme-type="SubsHead"></virtual>\r\n    <virtual theme-type="GiftHead"></virtual>\r\n    <virtual theme-type="RaidHead"></virtual>\r\n    <virtual theme-type="TwipHead"></virtual>\r\n    <virtual theme-type="CheerHead"></virtual>\r\n    <div theme-type="Text" class="Text"></div>\r\n  </div>\r\n</template>\r\n\r\n<template id="ErrorMessage">\r\n  \x3c!-- ErrorRoot의 Root에 추가되는 디버그 메세지 템플릿\r\n    Root : 최상위 element. data-type="[오류 종류]"가 추가\r\n    Text : 메세지 문자열.\r\n  --\x3e\r\n  <div theme-type="Root" class="Message ErrorMessage">\r\n    <div theme-type="Text" class="Text"></div>\r\n  </div>\r\n</template>\r\n\r\n<template id="Emote">\r\n  \x3c!-- NormalMessage의 Text 내부에 추가되는 일반, 구독자 전용 이모티콘 템플릿\r\n       NormalMessage의 Root에 data-emote="1"과 경우에 따라 data-emote-only="1"을 추가시킴\r\n    Root  : 최상위 element. data-type="[이름]" date-id="[아이디]"가 추가\r\n    Image : 이모티콘 이미지가 img element로 추가\r\n    Text  : 이미지를 표현하지 않을 경우 사용. 변환 이전 문자열\r\n  --\x3e\r\n  <virtual theme-type="Root" class="Emote">\r\n    <virtual theme-type="Image"></virtual>\r\n  </virtual>\r\n</template>\r\n\r\n<template id="SubsHead">\r\n  \x3c!-- NormalMessage의 SubsHead 내부에 추가되는 구독 메세지 헤더\r\n    Root  : 최상위 element. data-name="[티어]" data-value="[개월 수]"가 추가\r\n    Name  : 구독한 유저 이름\r\n    Text  : 구독 개월 수\r\n  --\x3e\r\n  <div theme-type="Root" class="Subs"><span>\r\n    ☆ <virtual theme-type="Text"></virtual>개월 구독!! ☆\r\n  </span></div>\r\n</template>\r\n\r\n<template id="GiftHead">\r\n  \x3c!-- NormalMessage의 GiftHead 내부에 추가되는 구독 선물 메세지 헤더\r\n    Root  : 최상위 element. data-name="[티어]" data-value="[선물 대상]"이 추가\r\n    Name  : 선물한 유저 이름\r\n    Text  : 선물 받는 유저 이름\r\n  --\x3e\r\n  <div theme-type="Root" class="Gift"><span>\r\n    ☆ <virtual theme-type="Text"></virtual>님께 구독 선물!! ☆\r\n  </span></div>\r\n</template>\r\n\r\n<template id="CheerHead">\r\n  \x3c!-- NormalMessage의 CheerHead 내부에 추가되는 응원 메세지 헤더\r\n       NormalMessage의 Root에 data-cheer="1"을 추가시킴\r\n    Root  : 최상위 element. data-value="[응원 금액]"이 추가\r\n    Name  : 응원한 유저 이름\r\n  --\x3e\r\n  <div theme-type="Root" class="Cheer"><span>\r\n    ☆ <virtual theme-type="Text"></virtual>비트 후원!! ☆\r\n  </span></div>\r\n</template>\r\n\r\n<template id="RaidHead">\r\n  \x3c!-- NormalMessage의 RaidHead 내부에 추가되는 레이드 메세지 헤더\r\n       NormalMessage의 Root에 data-raid="1"을 추가시킴\r\n    Root  : 최상위 element. data-value="[레이드 인원]"이 추가\r\n    Name  : 응원한 유저 이름\r\n  --\x3e\r\n  <div theme-type="Root" class="Raid"><span>\r\n    ☆ <virtaul theme-type="Text"></virtaul>명 레이드!! ☆\r\n  </span></div>\r\n</template>\r\n\r\n<template id="Cheermote">\r\n  \x3c!-- NormalMessage의 Text 내부에 추가되는 응원 이모티콘 템플릿\r\n    Root  : 최상위 element. data-type="[종류]" data-tier="[등급]" data-value="[금액]"이 추가\r\n    Image : 응원 이모티콘 이미지가 img element로 추가\r\n    Text  : 응원 금액 문자열\r\n  --\x3e\r\n  <span theme-type="Root" class="Cheermote">\r\n    <virtual theme-type="Image" class="CheerImage"></virtual>\r\n    <span theme-type="Text" class="CheerValue"></span>\r\n  </span>\r\n</template>\r\n\r\n<template id="Orimg">\r\n  \x3c!-- NormalMessage의 Text 내부에 추가되는 전용 이미지 템플릿\r\n    Root  : 최상위 element. data-type="[이름]"이 추가\r\n    Image : 전용 이미지가 img element로 추가\r\n    Text  : 변환 이전 문자열\r\n  --\x3e\r\n  <virtual theme-type="Root" class="Orimg">\r\n    <virtual theme-type="Image"></virtual>\r\n  </virtual>\r\n</template>\r\n\r\n<template id="TwipHead">\r\n  \x3c!-- NormalMessage의 TwipHead 내부에 추가되는 트윕 후원 메세지 헤더\r\n       NormalMessage의 Root에 data-twip="1"을 추가시킴\r\n    Root  : 최상위 element. data-value="[후원 금액]"이 추가\r\n    Name  : 후원한 유저 이름\r\n    Text  : 후원 금액 문자열\r\n  --\x3e\r\n  <div theme-type="Root" class="Twip"><span>\r\n    ☆ <virtual theme-type="Text"></virtual>원 후원!! ☆\r\n  </span></div>\r\n</template>\r\n\r\n<template id="TwipText">\r\n  \x3c!-- NormalMessage의 Text 내부를 대체하는 후원 텍스트 템플릿\r\n    Root : 최상위 element. data-name="[후원자]" data-value="[금액]"이 추가\r\n    Text : 후원 메세지\r\n  --\x3e\r\n  <virtual theme-type="Text"></virtual>\r\n</template>\r\n\r\n<template id="Video">\r\n  \x3c!-- NormalMessage의 Text 내부에 추가되는 비디오/클립 템플릿\r\n    Root  : 최상위 element.\r\n      data-type="[종류]" data-id="[아이디]" data-name="[제목]" data-value="[원본 텍스트]"가 추가\r\n      data-invalid="1"이 추가될 수 있음\r\n    Name  : 비디오 제목 문자열\r\n    Image : 섬네일 이미지가 img element로 추가\r\n    Text  : 제작자, 업로더 이름 문자열\r\n  --\x3e\r\n  <div theme-type="Root" class="Video">\r\n    <virtual theme-type="Image" class="Image"></virtual>\r\n    <div theme-type="Name" class="Title"></div>\r\n    <div theme-type="Text" calss="Name"></div>\r\n  </div>\r\n</template>'},{}],2:[function(e,t,r){var a={},n={0:" Undefined Error",200:" Zero Length Result",400:" Bad Request",401:" Unauthorized",403:" Forbidden",404:" Not Found",408:" Request Timeout",429:" Too Many Requests"};a.Get=async function(e){return new Promise(async function(t,r){var a=new XMLHttpRequest;a.open("GET",e.uri),"number"==typeof e.timeout?a.timeout=e.timeout:a.timeout=5e3,Array.isArray(e.header)&&e.header.forEach(function(e){a.setRequestHeader(e.key,e.value)}),a.onload=function(e){if(4===a.readyState)switch(a.status){case 0:case 200:a.responseText.length>0?t(a.responseText):r(200+n[200]);break;default:r(a.status+n[a.status])}},a.onerror=function(e){r(a.status+n[a.status])},a.ontimeout=function(e){r(408+n[408])},a.send()})},t.exports=function(e){return e.call({},a,null)}},{}],3:[function(e,t,r){var a={},n={rule:{expression:null,result:[]}},s=null;a.Get=function(e,t,r){var a=!1,n=new RegExp("^"+s.Command.Prefix.replace(/[-/\\^$*+?.()|[\]]/g,"\\$&")+"(.*)"),o=t[0].match(n);if(null!==o)return Object.keys(s.Command.List).forEach(function(n){if(!1!==s.Command.List[n].alias.some(function(e){return e.toLowerCase()===o[1].toLowerCase()})&&(!0===r||!1!==s.Command.List[n].allow.some(function(t){var r=Number(t.split("/")[1]),a=t.split("/")[0];return e.badges.some(function(e){return e.split("/")[0]===a&&Number(e.split("/")[1])>=r})}))){var i=this.Module||{};i=i[n[0].toUpperCase()+n.slice(1).toLowerCase()]||{};var l=Array.from(t);l.shift(),void 0!==i.Execute&&(a=i.Execute(l))}},this),a},a.Connect=function(){var e=s.Command.Prefix,t=s.Command.List.style.alias[0];Object.keys(s.Command.List.style.list).forEach(function(r){var a=s.Command.List.style.list[r];this.Get(null,[e+t,r].concat(a.split(" ")),!0)},this)},a.Load=function(e){s=e.Data.config},t.exports=function(e){return e.call({},a,n)}},{}],4:[function(e,t,r){var a={},n={},s=null;a.Execute=function(e){return 0===e.length?(Object.keys(s.nodes).forEach(function(e){for(;(s.nodes[e]||[]).length>0;)s.nodes[e].shift().forEach(function(e){e.parentElement.removeChild(e)})}),!0):(e.forEach(function(e){for(var t=0;t<(s.nodes.Normal||[]).length;++t)!0===s.nodes.Normal[t].some(function(t){var r=t.getAttribute("data-name").toLowerCase()===e.toLowerCase(),a=t.querySelectorAll(`*[data-name="${e}" i]`).length>0;return r||a})&&s.nodes.Normal.splice(t--,1)[0].forEach(function(e){e.parentElement.removeChild(e)})}),!1)},a.Load=function(e){e.Data.config,s=e.Message,e.Theme},t.exports=function(e){return e.call({},a,n)}},{}],5:[function(e,t,r){var a={},n={};a.Execute=async function(e){for(var t=e.length-1;t>=0;--t)null!==e[t].match(/^\s*$/)&&e.splice(t,1);if(!(e.length<2)){var r=e.shift(),a=e.join(" "),n=document.documentElement;return n.style.setProperty(`--${r}`,a),n.setAttribute(`data-${r}`,a),!1}},a.Load=function(e){e.Data.config,e.Message},t.exports=function(e){return e.call({},a,n)}},{}],6:[function(e,t,r){var a={},n={},s=null;a.Execute=async function(e){if(!0===s.Command.List.theme.enable){var t=location.href.split("?");1===t.length?location.href=t[0]+`?theme=${e[0]}`:null!==t[1].match(/theme=([^&]*)/)?t[1]=t[1].replace(/theme=([^&]*)/,`theme=${e[0]}`):t[1]=t[1]+`&theme=${e[0]}`,location.href=t.join("?")}},a.Load=function(e){s=e.Data.config,e.Message,e.Theme},t.exports=function(e){return e.call({},a,n)}},{}],7:[function(e,t,r){var a={},n={shared:{},config:{},default:{}},s=null,o=null,i=null;a.Get=async function(e,t){var r={};switch(e){case"config":await s.Get({uri:t}).then(function(e){r=JSON.parse(e)},function(e){o.Error("Data_Fail_Config",e)});break;case"session":Object.keys(sessionStorage).some(function(e){return null!==e.match(t)&&(r=JSON.parse(sessionStorage.getItem(e)),sessionStorage.removeItem(e),!0)});break;case"theme":await s.Get({uri:t}).then(function(e){r=i.Parse(e)},function(e){o.Error("Data_Fail_Theme",e)})}return r},a.Merge=function(e,t){Object.keys(t).forEach(function(r){if(null!==e[r]||null!==t[r])if(void 0!==e[r]&&null!==e[r])if("object"!=typeof e[r])e[r]=t[r];else{if(Array.isArray(e[r])){if("append"===t[r].type)return void(e[r]=e[r].concat(t[r].value));if("replace"===t[r].type)return void(e[r]=t[r].value)}a.Merge(e[r],t[r])}else{var n="string"==typeof t[r].type,s=Array.isArray(t[r].value);e[r]=n&&s?t[r].value:t[r]}})},a.ParseUri=function(){var e=location.href.split("?");e.length<=1||e.reverse()[0].split("&").forEach(function(e){if(2===e.split("=").length){var t=e.split("=")[0].toLowerCase(),r=e.split("=")[1];switch(t){case"channel":n.config.Channel=r;break;case"client-key":n.config.Key=r;break;case"style":if(void 0===((n.config.Command.List||{}).style||{}).list)break;r.split(";").forEach(function(e){var t=e.split("%20"),r=t.shift();n.config.Command.List.style.list[r]=t.join(" ")});break;case"theme":n.config.Theme.FileName=r;break;case"theme-enable":switch(r){case"0":case"false":case"no":n.config.Command.List.theme.enable=!1;break;default:n.config.Command.List.theme.enable=!0}break;case"timeout":n.config.Message.Timeout=Number(r),n.config.Error.Timeout=Math.min(Number(r),n.config.Error.Timeout);break;case"zoom":n.config.Command.List.style.list.zoom=r}}})},a.Load=async function(e){for(s=e.Api,o=e.Message,i=e.Theme,Object.assign(n.shared,e.Shared),Object.assign(n.default,e.Default),Object.assign(n.config,e.Default);;){var t=await a.Get("session",new RegExp(n.shared.Data.SessionStorageFormat));if(0===Object.keys(t).length)break;a.Merge(n.config,t)}var r=JSON.parse(JSON.stringify(n.config.Data.Uris));(await Promise.all(r.map(async function(e){return await a.Get("config",e)}))).forEach(function(e){a.Merge(n.config,e)}),a.ParseUri(),e.Done.Done("data")},t.exports=function(e){return e.call({},a,n)}},{}],8:[function(e,t,r){var a,n;debugData=e("./main.js"),debugData.Test={},debugData.Test.list=[["@badges=;color=#224466;display-name=테스트1;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :보통 보면 이럴 때","@badges=;color=#224466;display-name=테스트1;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :온갖 개드립을 다 치던데","@badges=;color=#224466;display-name=테스트1;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :그럴만한 센스가 없네요 저는"],["@badges=;color=#224466;display-name=테스트1;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :???","@badges=bits/1000;color=#8A2BE2;display-name=테스트5;emotes=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :?","@badges=partner/1;color=;display-name=테스트3;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :?","@badges=;color=;display-name=테스트4;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=170962099;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :??"],["@badges=premium/1;color=;display-name=테스트2;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :뭐야","@badges=premium/1;color=;display-name=테스트2;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :ㅋㅋㅋ","@badges=;color=;display-name=테스트4;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=170962099;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ","@badges=;color=#224466;display-name=테스트1;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ","@badges=subscriber/6;display-name=테스트6;emotes=;flags=;mod=;subscriber=1;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :ㅋㅋㅋ ㅋㅋㅋㅋㅋㅋ"],"@badges=premium/1;color=;display-name=테스트2;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :이 채널에 왔으면 ~이글 부터 보라구","@badges=premium/1;color=;display-name=테스트2;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :이건 뭐 어떡하라는것이지?","@badges=partner/1;color=;display-name=테스트3;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :어떡하긴 잘돌아가나 보기나 하란거지","@badges=;color=;display-name=테스트4;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=170962099;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :ㅎㅇ","@badges=;color=;display-name=테스트4;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=170962099;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :이모지도 문제 없어 👵🏿","@badges=bits/1000;color=#8A2BE2;display-name=테스트5;emotes=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :트하트하","@badges=bits/1000;color=#8A2BE2;display-name=테스트5;emotes=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :ㅋㅋ",["@badges=bits/100;bits=100;color=#8A2BE2;display-name=비트테스트;emotes=;mod=0;room-subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :ripcheer100 비","@badges=bits/100;bits=1;color=#8A2BE2;display-name=비트테스트;emotes=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :vohiyo1 트","@badges=bits/1000;bits=1000;color=#8A2BE2;display-name=비트테스트;emotes=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :cheer1000 테스트"],"@badges=subscriber/6,premium/1;color=#0000FF;display-name=구독콘테스트1;emote-only=1;emotes=253633:0-12;mod=0;subscriber=1;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :igrainHitails","@badges=turbo/0;color=#AA0077;display-name=구독콘테스트2;emotes=253633:3-15;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :트하 igrainHitails","@badges=turbo/0;color=#AA0077;display-name=구독콘테스트2;emote-only=1;emotes=1011346:0-8,10-18,20-28,30-38,40-48;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :igrainRIP igrainRIP igrainRIP igrainRIP igrainRIP","@badges=broadcaster/1;color=#74C2DB;display-name=이모티콘테스트1;emote-only=1;emotes=483:0-1;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :<3",["@badges=subscriber/3,premium/1;color=#0000FF;display-name=구독테스트1;emotes=;login=TESTER;mod=0;msg-id=resub;msg-param-months=5;msg-param-sub-plan-name=SubPlanName;msg-param-sub-plan=1000;subscriber=1;system-msg=TESTERssubscribedsfors5smonthssinsasrow!;turbo=0;user-id=0;user-type= :tmi.twitch.tv USERNOTICE #BROADCASTER","@badges=subscriber/3,premium/1;color=#0000FF;display-name=구독테스트1;emotes=;login=TESTER;mod=0;subscriber=1;turbo=0;user-id=0;user-type= :tmi.twitch.tv PRIVMSG #BROADCASTER :아 구독메세지 안씀","@badges=subscriber/6;color=#EEEEEE;display-name=구독테스트2;emotes=;login=TESTER;mod=0;msg-id=resub;msg-param-months=8;msg-param-sub-plan-name=SubPlanName;msg-param-sub-plan=2000;subscriber=1;system-msg=TESTERssubscribedsfors8smonthssinsasrow!;turbo=0;user-id=0;user-type= :tmi.twitch.tv USERNOTICE #BROADCASTER :ㅋㅋㅋ 한달 버림 ㅊㅋㅊㅋ"],"@badges=subscriber/24,twitchcon2018/1;color=#39008A;display-name=구독선물테스트;emotes=;flags=;login=TESTER;mod=0;msg-id=subgift;msg-param-months=1;msg-param-recipient-display-name=받을사람;msg-param-recipient-id=0;msg-param-recipient-user-name=RECIPIENT;msg-param-sender-count=1;msg-param-sub-plan-name=SubPlanName;msg-param-sub-plan=1000;subscriber=1;system-msg=TESTERsgiftedsasTiers1ssubstos받을사람!sThississtheirsfirstsGiftsSubsinstheschannel!;turbo=0;user-id=0;user-type= :tmi.twitch.tv USERNOTICE #BROADCASTER","@badges=subscriber/3,turbo/1;color=#003CB4;display-name=클립테스트1;emotes=;mod=0;subscriber=1;turbo=1;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :https://clips.twitch.tv/DeafCuriousPeanutMikeHogu?tt_content=video_thumbnail","@badges=;color=;display-name=클립테스트2;emotes=;flags=;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :https://clips.twitch.tv/IgnorantSpikyPiePoooound?tt_content=video_title",["@badges=broadcaster/1;color=#FFFFFF;display-name=클립테스트3;emotes=;flags=;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :https://clips.twitch.tv/SomeWrongClip 틀린 링크는 표시가 안 돼요","@badges=broadcaster/1;color=#FFFFFF;display-name=클립테스트3;emotes=;flags=;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :하긴 틀린 링크니까 당연한가 이거나 보세요 https://clips.twitch.tv/TsundereBovineBubbleteaSaltBae"],"@badges=;color=#8A2BE2;display-name=유튜브테스트;emotes=;flags=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :이건 보고 트위치하고계십니까 https://www.youtube.com/watch?v=2bVgU2Tje84 J.E.B는 진리야"],debugData.Test.Append=function(){var e=[[`@badges=turbo/1;color=#000000;display-name=트윕테스트;emotes=;mod=0;subscriber=0;turbo=1;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER : ${debugData.Data.config.Message.Twip.Format.replace("{name}","트윕테스트").replace("{value}","10000").replace("{text}","일반 유저가 말하면 이렇지만")}`,`@badges=moderator/1,subscriber/0,partner/1;color=#C20A85;display-name=Twipkr;emotes=;mod=1;subscriber=1;turbo=0;user-id=115581168;user-type=mod :twipkr!twipkr@twipkr.tmi.twitch.tv PRIVMSG #yeokka :ACTION ${debugData.Data.config.Message.Twip.Format.replace("{name}","트윕테스트").replace("{value}","10000").replace("{text}","트윕의 채팅이라면 이렇게")}`],`@badges=bits/100;color=#8A2BE2;display-name=이미지테스트;emotes=;mod=0;subscriber=0;turbo=0;user-id=0;user-type= :TESTER!TESTER@TESTER.tmi.twitch.tv PRIVMSG #BROADCASTER :${Object.keys(debugData.Message.Module.Orimg.list||{}).length>0?debugData.Data.config.Message.Orimg.Prefix+Object.keys(debugData.Message.Module.Orimg.list)[0]:"전용이미지가 한 개도 없네.."}`];debugData.Test.list=debugData.Test.list.concat(e)},debugData.Test.Send=function(e){debugData.Irc.Response(e.shift()),0===e.length?debugData.Test.Run():setTimeout(()=>{debugData.Test.Send(e)},500+2500*Math.random())},debugData.Test.Run=function(){if(0!==debugData.Test.list.length){var e=debugData.Test.list.sort(()=>.5-Math.random()).reduce(function(e,t){return"string"==typeof t?e.push(t):Array.isArray(t)&&t.forEach(function(t){e.push(t)}),e},[]);setTimeout(()=>{debugData.Test.Send(e)},5e3)}},debugData.Test.DisConnect=function(){!0===debugData.Done.list.message?(debugData.Test.Append(),debugData.Irc.socket.send("QUIT\r\n")):setTimeout(()=>{debugData.Test.DisConnect()},5e3)},a=-1!==location.href.split("/").reverse()[0].indexOf("test"),n=location.href.split("?").reverse()[0].split("&").some(function(e){return"test"===e.split("=")[0].toLowerCase()}),(a||n)&&(debugData.Test.Run(),debugData.Test.DisConnect())},{"./main.js":11}],9:[function(e,t,r){var a={},n={list:{}},s=null;a.Register=function(e){Array.from(arguments).forEach(function(e){n.list[e]=!1})},a.Done=function(e){void 0!==n.list[e]&&(n.list[e]=!0),Object.keys(n.list).every(function(e){return!0===n.list[e]})&&s.Error("Module_Success_Connect",null)},a.Load=function(e){e.Data.config,e.Data.shared,s=e.Message},t.exports=function(e){return e.call({},a,n)}},{}],10:[function(e,t,r){var a={},n={socket:null},s=null,o=null,i=null,l=null,c=function(e){for(var t=0;t<arguments.length;++t)n.socket.send(arguments[t]+"\r\n")};a.Connect=function(){var e=o.Channel;"string"==typeof e&&""!==e&&null===e.match(/\W/)||l.Error("Irc_Wrong_Channel");try{this.socket=n.socket=new WebSocket(i.Irc.Uri)}catch(e){return void l.Error("Irc_Fail_Connect",e.message)}n.socket.onopen=function(){var t=function(e){return Math.floor(Math.random()*`1${"0".repeat(e)}`)},r=t(8),a="justinfan"+t(5);c(`PASS ${r}`,`NICK ${a}`,`CAP REQ :${i.Irc.Caps.join(" ")}`,`JOIN #${e}`)},n.socket.onmessage=function(e){e.data.toString().split(/[\r\n]+/).forEach(function(e){e.match(/^[\s]*$/)||a.Response(e)})},n.socket.onclose=function(e){i.Id=null,l.Error("Irc_Close_Connect",e.code)}},a.Response=function(e){var t=e.split(" ");if("PING"!==t[0]){var r;if(":"===(d=t[0][0]))switch(t[1]){case"001":case"002":case"003":case"004":case"375":case"372":case"376":case"366":case"CAP":case"JOIN":case"PART":case"MODE":case"353":case"HOSTTARGET":return;case"NOTICE":return void l.Error("Irc_Notice",t.splice(3,t.length).join(" ").substring(1));default:return void l.Error("Irc_Wrong_Message",d+t[1])}if("@"===d){var a=t.shift().substring(1).split(";").reduce(function(e,t){var r=t.split("=");if(void 0!==r[1])switch(r[0]){case"id":case"turbo":case"tmi-sent-ts":case"user-type":break;case"badges":""===r[1]?e[r[0]]=[]:e[r[0]]=r[1].split(",");break;case"room-id":null===i.Id&&(e[r[0]]=r[1]);break;default:e[r[0]]=r[1]}return e},{}),n=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},u=function(){return Array.from(arguments).reduce(function(e,t){return 0===t.indexOf("msg-param-")?e[t.substring(10)]=a[t]:e[t]="name"===t?a["display-name"]:a[t],e},{})};switch(t[1]){case"ROOMSTATE":return void(void 0!==a["room-id"]&&(i.Id=a["room-id"],l.Connect()));case"PRIVMSG":return void l.Add((r=u("name","badges","emotes","emote-only","color","bits"),r.text=n(t.splice(3,t.length).join(" ").substring(1)),r));case"CLEARCHAT":var m=(t[3]||" ").substring(1),d=(o.Command||{}).Prefix,p=((o.Command||{}).List.clear||{}).alias[0];return void(""===m?s.Get(null,[d+p],!0):s.Get(null,[d+p,m],!0));case"USERNOTICE":switch(a["msg-id"]){case"sub":case"resub":return void l.Add(function(){var e=u("name","badges","emotes","emote-only","color","msg-param-months","msg-param-sub-plan");return e.text=n(t.splice(3,t.length).join(" ").substring(1)),e}());case"subgift":return void l.Add(function(){var e=u("name","badges","emotes","emote-only","color","msg-param-recipient-display-name","msg-param-sub-plan");return e.text="",e}());case"raid":return void l.Add(function(){var e=u("name","badges","color","msg-param-viewerCount");return e.text="",e}());case"ritual":case"rewardgift":return;default:return void l.Error("Irc_Wrong_Message",d+t[1]+" "+a["msg-id"])}case"NOTICE":return;default:return void l.Error("Irc_Wrong_Message",d+t[1])}}l.Error("Irc_Wrong_Message",e)}else c("PONG")},a.Load=function(e){s=e.Command,o=e.Data.config,i=e.Data.shared,l=e.Message},t.exports=function(e){return e.call({},a,n)}},{}],11:[function(e,t,r){var a=new function(){return this.Irc=e("./irc.js"),this.Message=e("./message.js"),this["Message/Cheer"]=e("./message/cheer.js"),this["Message/Subscrp"]=e("./message/subscrp.js"),this["Message/Raid"]=e("./message/raid.js"),this["Message/Color"]=e("./message/color.js"),this["Message/Emote"]=e("./message/emote.js"),this["Message/Orimg"]=e("./message/orimg.js"),this["Message/Twip"]=e("./message/twip.js"),this["Message/Link"]=e("./message/link.js"),this.Theme=e("./theme.js"),this["Theme/Default"]=e("../html/theme.html"),this.Command=e("./command.js"),this["Command/Clear"]=e("./command/clear.js"),this["Command/Style"]=e("./command/style.js"),this["Command/Theme"]=e("./command/theme.js"),this.Data=e("./data.js"),this.Default=e("../json/default.json"),this.Shared=e("../json/shared.json"),this.Api=e("./api.js"),this.Done=e("./done.js"),this},n=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},s=function(e){return null!==e&&(void 0!==e&&"object"==typeof e)},o=function(e,t){return s(e)&&Object.keys(e).forEach(t=>{this[n(t)]=e[t]},this),s(t)&&Object.keys(t).forEach(e=>{this[function(e){return e.charAt(0).toLowerCase()+e.slice(1)}(e)]=t[e]},this),this};t.exports=new function(){return Object.assign(this,function(e){var t=[];Object.keys(e).forEach(function(r){"function"==typeof e[r]&&(e[r]=e[r](o));var a=r.split("/").length-1;void 0===t[a]&&(t[a]=[]),t[a].push(r)});var r={};return t.shift().forEach(function(t){r[n(t)]=e[t]}),t.forEach(function(t){t.forEach(function(t){var a=t.split("/");a.forEach(function(e){e=n(e)});for(var s=r;a.length>1;)s=s[a.shift()];void 0===s.Module&&(s.Module={}),s.Module[a[0]]=e[t]})}),r}(a)),this.Done.Register("data","theme","message","cheer"),async function(e,t){for(var r=Object.keys(t),a=0;a<r.length;++a){for(var n=r[a].split("/"),s=e[n.shift()];n.length>=1;)s=(s.Module||{})[n.shift()];void 0!==(s||{}).Load&&await s.Load(e)}}(this,a).then(()=>{this.Theme.Connect(),this.Irc.Connect(),this.Command.Connect()}),this}},{"../html/theme.html":1,"../json/default.json":22,"../json/shared.json":23,"./api.js":2,"./command.js":3,"./command/clear.js":4,"./command/style.js":5,"./command/theme.js":6,"./data.js":7,"./done.js":9,"./irc.js":10,"./message.js":12,"./message/cheer.js":13,"./message/color.js":14,"./message/emote.js":15,"./message/link.js":16,"./message/orimg.js":17,"./message/raid.js":18,"./message/subscrp.js":19,"./message/twip.js":20,"./theme.js":21}],12:[function(e,t,r){var a={},n={badges:{},entryPoint:{},nodes:{},length:{}},s=null,o=null,i=null,l=null,c=null,u=null,m=function(e){switch(e){case"Normal":case"Error":break;default:return void console.error(`GetRootEntry, type, ${e}`)}if(void 0!==n.entryPoint[e])return n.entryPoint[e];var t=u.template[`${e}Root`];if(void 0===t&&"Error"===e&&(t=u.template.NormalRoot),void 0!==t)return t.forEach(function(e){document.body.appendChild(e.cloneNode(!0))}),entry=document.querySelectorAll("*[theme-type=Root]")[0],entry.removeAttribute("theme-type"),n.entryPoint[e]=entry,entry;var r=i.Error;"Error"===e?a.NativeError(r.Error_Message_No_ErrorRoot):a.NativeError(r.Error_Mesage_No_NormalRoot)};a.AddSubElement=function(e,t){switch(e){case"Badges":if(0===Object.keys(n.badges).length)break;t.badges.forEach(function(e){var r=document.createElement("img"),a=e.split("/")[0],s=e.split("/")[1];r.setAttribute("data-type",a),r.setAttribute("data-tier",s);var o=(n.badges[a]||{}).versions||{},i=[s,"0","1"].reduce(function(e,t){return null!==e||void 0===o[t]?e:o[t]},null);r.src=i.image_url_4x||i.image_url_2x||i.image_url_1x,"string"==typeof r.src&&""!==r.src&&t.parent.appendChild(r)});break;case"Image":var r=document.createElement("img");r.src=t.image,t.parent.appendChild(r);break;case"Name":t.parent.innerHTML+=t.name;break;case"Text":t.parent.innerHTML+=t.text;break;case"Root":Object.keys(t.attr||{}).forEach(function(e){t.parent.setAttribute("data-"+e,t.attr[e])}),Object.keys(t.var||{}).forEach(function(e){t.parent.style.setProperty(["--data-"+e],t.var[e])});break;default:var s=[];u.template[e].forEach(function(e){s.push(t.parent.appendChild(e.cloneNode(!0)))});var o=["Root","Name","Badges","Image","Text"].reduce(function(e,r){return e[r]=Array.from(t.parent.querySelectorAll(`*[theme-type=${r}]`)),e},{});Object.keys(o).forEach(function(e){o[e].forEach(function(e){e.removeAttribute("theme-type")}),o[e].forEach(function(r){var n=JSON.parse(JSON.stringify(t));n.parent=r,a.AddSubElement(e,n)})});var i=Object.keys(t.root||{}).reduce(function(e,r){var a=Array.from(t.parent.querySelectorAll(`*[theme-type=${r}]`));return a.length>0&&(e[r]=a),e},{});Object.keys(i).forEach(function(e){i[e].forEach(function(e){e.removeAttribute("theme-type")}),i[e].forEach(function(r){var n=t.root[e];n.parent=r,a.AddSubElement(e,n)})}),Array.from(t.parent.querySelectorAll("*[theme-data]")).forEach(function(e){var t=JSON.parse(e.getAttribute("theme-data"));Object.keys(t).forEach(function(r,a){var s=t[r];if("random"===s[0])switch(s.length){case 2:e.style.setProperty(`--data-${r}`,Math.random()*s[1]);break;case 3:e.style.setProperty(`--data-${r}`,Math.random()*(s[3]-s[2])+s[2]);break;case 4:var o=Math.floor((s[2]-s[1]+s[3])/s[3]);e.style.setProperty(`--data-${r}`,Math.floor(Math.random()*o)*s[3])}else if("sequence"===s[0])switch(void 0===n.length[r]&&(n.length[r]=0),s.length){case 1:e.style.setProperty(`--data-${r}`,n.length[r]++);break;case 2:e.style.setProperty(`--data-${r}`,n.length[r]),n.length[r]=divisor%(n.length[r]+1);break;case 3:e.style.setProperty(`--data-${r}`,n.length[r]+from),n.length[r]=(to-from)%(n.length[r]+1)}}),e.removeAttribute("theme-data")});var l=0===Object.keys(i).length,c=null!==String(t.text).match(/^\s*$/);return l&&c&&s.forEach(function(e){return t.parent.removeChild(e),null}),s.reduce(function(e,t){if("#text"===t.nodeName)return e.push(t),e;if(Array.from(t.getElementsByTagName("virtual")).forEach(function(e){var t=Array.from(e.attributes);Array.from(e.childNodes).forEach(function(r){e.parentElement.insertBefore(r,e),"#text"!==r.nodeName&&t.forEach(function(e){null===r.getAttribute(e.name)&&r.setAttribute(e.name,e.value)})}),e.parentElement.removeChild(e)}),"VIRTUAL"===t.nodeName){var r=Array.from(t.attributes);Array.from(t.childNodes).forEach(function(a){t.parentElement.insertBefore(a,t),e.push(a),"#text"!==a.nodeName&&r.forEach(function(e){null===a.getAttribute(e.name)&&a.setAttribute(e.name,e.value)})}),t.parentElement.removeChild(t)}else e.push(t);return e},[])}},a.NativeError=function(e){var t=document.createElement("div");Object.assign(t.style,{background:"red",color:"white",fontWeight:"bold",whiteSpace:"pre-wrap",wordBreak:"keep-all"}),t.innerHTML=e,document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t)},1e3*((i||{}).Timeout||10))};var d=function(e,t,r){var s=t.toLowerCase(),o=s[0].toUpperCase()+s.slice(1),i=m(o);Array.isArray(n.nodes[o])||(n.nodes[o]=[]);var l=a.AddSubElement(`${o}Message`,Object.assign({parent:i},e));null!==l&&(n.nodes[o].push(l),r.Timeout>0&&setTimeout(function(){var e=n.nodes[o].indexOf(l);e>=0&&n.nodes[o].splice(e,1)[0].forEach(function(e){e.parentElement.removeChild(e)})},1e3*r.Timeout),n.nodes[o].length>Math.min(r.Maximum,100)&&n.nodes[o].shift().forEach(function(e){e.parentElement.removeChild(e)}))};a.Error=function(e,t){var r=((i||{}).Error||{})[e]||e;try{if("Module_Success_Connect"===e){if(!0!==r)return;r="",(u.template.Description||[]).forEach(function(e){r+=e.outerHTML||e.wholeText})}if(""===r)return;!1!==i.Error.Detailed&&"string"==typeof t?d({text:r+"\n"+t,attr:{type:e}},"Error",i.Error):d({text:r,attr:{type:e}},"Error",i.Error)}catch(n){"string"==typeof t?a.NativeError(`${r}\n${t}\n\n${n}`):a.NativeError(`${e}\n\n${n}`)}},a.Add=function(e){e.attr={name:e.name};var t=e.text.split(" "),r=new Array(t.length);e.Emote={index:e.emotes,only:"1"===e["emote-only"]},delete e.emotes,delete e["emote-only"],this.Module.Emote.Replace(e.Emote,t,r),this.Module.Emote.Set(e.Emote,e),e.Subscrp={subs:e.months,gift:e["recipient-display-name"],tier:e["sub-plan"]},delete e.months,delete e["recipient-display-name"],delete e["subs-plan"],this.Module.Subscrp.Set(e.Subscrp,e),e.Raid={count:e.viewerCount},delete e.viewerCount,this.Module.Raid.Set(e.Raid,e),e.Color={name:e.name,badges:e.badges,color:e.color},delete e.color,this.Module.Color.Replace(e.Color,t,r),this.Module.Color.Set(e.Color,e),e.Cheer=Number(e.bits||0),delete e.bits,this.Module.Cheer.Replace(e.Cheer,t,r),this.Module.Cheer.Set(e.Cheer,e),e.Orimg={name:e.name},this.Module.Orimg.Replace(e.Orimg,t,r),e.Twip={isTwip:"Twipkr"===e.name},this.Module.Twip.Replace(e.Twip,t,r),this.Module.Twip.Set(e.Twip,e),this.Module.Link.Replace(null,t,r).then(()=>{o.Get(e,t)||(e.text=t.join(" "),d(e,"Normal",i.Message))})},a.Connect=function(){var e=function(e){return function(t){s.Get({uri:e}).then(function(e){t([!0,JSON.parse(e)])},function(e){t([!1,e])})}};Promise.all([new Promise(e(c.Message.GlobalUri)),new Promise(e(c.Message.ChannelUri.replace(/{id}/g,c.Id)))]).then(function(e){if(!1!==e[0][0]){if(Object.assign(n.badges,e[0][1].badge_sets),!0===e[1][0]){var t=e[1][1].badge_sets;Object.keys(t).forEach(function(e){"bits"===e?(void 0===(n.badges[e]||{}).versions&&(n.badges[e]={versions:{}}),Object.assign(n.badges[e].versions,t[e].versions)):n.badges[e]=t[e]})}l.Done("message")}else a.Error("Message_Fail_Badge",e[0][1])}),this.Module.Cheer.Connect(),this.Module.Orimg.Connect(),this.Module.Twip.Connect(),this.Module.Link.Connect()},a.Load=function(e){l=e.Done,s=e.Api,i=e.Data.config,o=e.Command,c=e.Data.shared,u=e.Theme},t.exports=function(e){return e.call({},a,n)}},{}],13:[function(e,t,r){var a={},n={list:{}},s=null,o=null,i=null,l=null,c=null;a.Set=function(e,t){0!==e&&(void 0===t.attr&&(t.attr={}),t.attr.cheer="1",void 0===t.root&&(t.root={}),t.root.CheerHead={attr:{value:e},name:t.name,text:e})},a.Replace=function(e,t,r){0!==e&&t.forEach(function(e,a){if(!0!==r[a]){var s=e.match(/^(\D+)(\d+)$/);if(null!==s){var o=s[1].toLowerCase();if(void 0!==n.list[o]){var i=Number(s[2]);if(0!==i){var l=n.list[o].reduce(function(e,t,r){return t.min_bits<=i?r:e},0),u=n.list[o][l].images.light.animated,m=Object.keys(u).reduce(function(e,t){var r=Number(t);return r>e?r:e},0);r[a]=!0;var d=document.createElement("span");c.AddSubElement("Cheermote",{parent:d,attr:{type:o,tier:n.list[o][l].id,value:i},image:u[m],text:i}),t[a]=d.innerHTML}}}}})},a.Connect=function(){null!==o.Key&&o.Key.length>0?s.Get({uri:l.Message.Cheer.Uri.replace(/{id}/g,l.Id),header:[{key:"Client-ID",value:o.Key}]}).then(function(e){var t=JSON.parse(e).actions;Object.assign(n.list,t.reduce(function(e,t){return e[t.prefix.toLowerCase()]=t.tiers,e},{})),i.Done("cheer")},function(e){c.Error("Message_Fail_Cheer",e)}):(c.Error("Message_Wrong_Cheer"),a.Replace=function(){})},a.Load=function(e){i=e.Done,s=e.Api,o=e.Data.config,l=e.Data.shared,c=e.Message},t.exports=function(e){return e.call({},a,n)}},{}],14:[function(e,t,r){var a={},n={},s=null,o=null;a.Set=function(e,t){void 0===t.attr&&(t.attr={}),void 0===t.var&&(t.var={}),!0===e.isColorChat&&(t.attr["color-chat"]="1"),t.var.color=e.color},a.Replace=function(e,t,r){var a=null!==t.join(" ").match(new RegExp("^"+o.Message.Color.Prefix+"[\\s\\S]+"+o.Message.Color.Postfix+"$"));if(a){t.shift(),r.shift();var n=t.length-1;t[n]=t[n].replace(new RegExp(o.Message.Color.Postfix+"$"),"")}if(!0===s.Message.Color.Enable){if(""==e.color){var i=s.Message.Color.List.length,l=e.name.charCodeAt(0),c=e.name.charCodeAt(e.name.length-1);e.color=s.Message.Color.List[(l+c)%i]}if(a){if(s.Message.Color.ColorChat.indexOf[""]>-1)return void(e.isColorChat=!0);s.Message.Color.ColorChat.some(function(t){var r=Number(t.split("/")[1]),a=t.split("/")[0];return!!e.badges.some(function(e){return e.split("/")[0]===a&&Number(e.split("/")[1])>=r})&&(e.isColorChat=!0,!0)})}}else delete e.color},a.Load=function(e){s=e.Data.config,o=e.Data.shared},t.exports=function(e){return e.call({},a,n)}},{}],15:[function(e,t,r){var a={},n={},s=null,o=null;a.Set=function(e,t){!0===(e||{}).only&&(void 0===t.attr&&(t.attr={}),t.attr["emote-only"]="1")},a.Replace=function(e,t,r){if(""!==((e||{}).index||"")){var a,n=((a=document.createElement("span")).innerHTML=t.join(" ").replace(new RegExp("^"+s.Message.Color.Prefix+"([\\s\\S]+)"+s.Message.Color.Postfix+"$"),"$1"),a.innerText),i=[],l=[];e.index.split("/").forEach(function(e){var t=e.split(":"),r=t.pop().split(",")[0].split("-").map(e=>Number(e));t=t[0];var a=n.slice(r[0],r[1]+1);i.push(t),l.push(a)}),t.forEach(function(e,a){if(!0!==r[a]){var n=document.createElement("span");n.innerHTML=e;var c=l.indexOf(n.innerText);-1!==c&&(r[a]=!0,n.innerHTML="",o.AddSubElement("Emote",{parent:n,attr:{type:e,id:i[c]},image:s.Message.Emote.Uri.replace("{id}",i[c]),text:e}),t[a]=n.innerHTML)}})}},a.Load=function(e){s=e.Data.shared,o=e.Message},t.exports=function(e){return e.call({},a,n)}},{}],16:[function(e,t,r){var a={},n={youtube:{},clip:{},twitch:{}},s=null,o=null,i=null,l=null;a.Replace=async function(e,t,r){if(!0===o.Message.Link.Enable)for(var a=0;a<t.length;++a)if(!0!==r[a]){var i=t[a].replace(n.youtube.replacer,"").match(n.youtube.regExp),c=t[a].match(n.clip.regExp),u=t[a].match(n.twitch.regExp),m="",d="";if(null!==i){if(!1===i[1].split("&").some(function(e){return"v"===(e.split("=")||[])[0]&&(m=e.split("=")[1],d="youtube",!0)}))continue}else if(null!==c)m=c[1],d="clip";else{if(null===u)continue;m=u[1],d="twitch"}var p="",h="",g="";await s.Get({uri:n[d].uri.replace(/{id}/g,m)}).then(function(e){var t=JSON.parse(e);void 0===t.error&&(p=t.title,h=t.curator_name||t.author_name,g=t.thumbnail_url)},function(e){}),r[a]=!0;var f=document.createElement("span"),b={parent:f,attr:{type:d,id:m,name:p,value:t[a]},name:p,image:g,text:h};""===g&&(b.attr.invalid="1"),l.AddSubElement("Video",b),t[a]=f.innerHTML}},a.Connect=function(){Object.keys(i.Message.Link).forEach(function(e){var t=i.Message.Link[e];n[e].uri=t.uri,n[e].regExp=new RegExp(t.regExp),t.replacer&&(n[e].replacer=new RegExp(t.replacer))})},a.Load=function(e){s=e.Api,o=e.Data.config,i=e.Data.shared,l=e.Message},t.exports=function(e){return e.call({},a,n)}},{}],17:[function(e,t,r){var a={},n={list:{},groups:{},alias:{},counts:{}},s=null,o=null;a.Replace=function(e,t,r){t.forEach(function(a,i){if(!0!==r[i]){var l=document.createElement("span");if(l.innerHTML=a,null!==(a=l.innerText).match(new RegExp("^"+s.Message.Orimg.Prefix))){var c=a.replace(s.Message.Orimg.Prefix,""),u="";if(!1!==Object.keys(n.alias).reverse().some(function(e){return 0===c.indexOf(e)&&(u=c.replace(e,""),c=n.alias[e],!0)})){if(void 0===n.list[c]){var m=n.groups[c];switch(m.method){case"random":c=m.list[Math.floor(Math.random()*m.list.length)];break;case"sequence":void 0===n.counts[c]&&(n.counts[c]=0),c=m.list[n.counts[c]++],n.counts[c]%=m.list.length;break;case"fixed":var d=e.name.charCodeAt(0),p=e.name.charCodeAt(e.name.length-1);c=m.list[(d+p)%m.list.length]}}r[i]=!0,l.innerHTML="",o.AddSubElement("Orimg",{parent:l,attr:{type:c},image:s.Message.Orimg.UriBase+n.list[c],text:a}),t[i]=l.innerHTML+u}}}})},a.Connect=function(){s.Message.Orimg.Images.forEach(function(e){n.list[e.name]=e.uri,n.alias[e.name]=e.name,(e.alias||[]).forEach(function(t){n.alias[t]=e.name})}),s.Message.Orimg.Groups.forEach(function(e){if("none"!==e.method&&void 0===n.alias[e.name]){if(void 0===(e.rule||e.list))return;if(n.alias[e.name]=e.name,n.groups[e.name]={method:e.method,list:e.list},void 0===e.list){n.groups[e.name].list=[];var t=new RegExp(e.rule);Object.keys(n.list).forEach(function(r){null!==r.match(t)&&n.groups[e.name].list.push(r)})}}})},a.Load=function(e){done=e.Done,s=e.Data.config,e.Data.shared,o=e.Message},t.exports=function(e){return e.call({},a,n)}},{}],18:[function(e,t,r){var a={},n={};a.Set=function(e,t){void 0!==e.count&&(void 0===t.attr&&(t.attr={}),t.attr.raid="1",void 0===t.root&&(t.root={}),t.root.RaidHead={attr:{value:e.count},name:t.name,text:e.count})},a.Load=function(e){e.Data.config,e.Message},t.exports=function(e){return e.call({},a,n)}},{}],19:[function(e,t,r){var a={},n={};a.Set=function(e,t){void 0===e.subs&&void 0===e.gift||(void 0===t.attr&&(t.attr={}),void 0!==e.subs&&(t.attr.subs="1"),void 0!==e.gift&&(t.attr.gift="1"),void 0===t.root&&(t.root={}),void 0!==e.subs&&(t.root.SubsHead={attr:{name:e.tier,value:e.subs},name:t.name,text:e.subs}),void 0!==e.gift&&(t.root.GiftHead={attr:{name:e.tier,value:e.gift},name:t.name,text:e.gift}))},a.Load=function(e){e.Data.config,e.Message},t.exports=function(e){return e.call({},a,n)}},{}],20:[function(e,t,r){var a={},n={rule:{expression:null,result:[]}},s=null,o=null;a.Set=function(e,t){!0===(s.Message.Twip.Enable&&e.isTwip)&&(void 0===t.attr&&(t.attr={}),t.attr.twip="1",void 0===t.root&&(t.root={}),t.root.TwipHead={attr:{value:e.value},name:e.name,text:e.value})},a.Replace=function(e,t,r){if(!s.Message.Twip.Enable||!0===e.isTwip)if(null!==n.rule.expression){var a=t.join(" ").match(n.rule.expression);if((a||[]).length===n.rule.result.length+1){for(["name","value","text"].forEach(function(t){e[t]=a[n.rule.result.indexOf(`{${t}}`)+1]});t.length>0;)t.pop(),r.pop();r.push(!0);var i=document.createElement("span");o.AddSubElement("TwipText",{parent:i,attr:{name:e.name,value:e.value},text:e.text}),t.push(i.innerHTML)}else e.isTwip=!1}else e.isTwip=!1},a.Connect=function(){var e=(s.Message.Twip||{}).Format;if("string"==typeof e){var t=new RegExp("(?:{text})|(?:{name})|(?:{value})","g");(e.match(t)||[]).forEach(function(e){n.rule.result.push(e)}),""!==e&&(n.rule.expression=new RegExp(e.replace(/[-/\\^$*+?.()|[\]]/g,"\\$&").replace(t,"(.*)")))}},a.Load=function(e){s=e.Data.config,o=e.Message},t.exports=function(e){return e.call({},a,n)}},{}],21:[function(e,t,r){var a={},n={template:{}},s=null,o=null,i=null,l=null;a.Parse=function(e){for(var t=Object.keys(n.template),r=0;r<t.length;++r)delete n.template[t[r]];var a=document.head.querySelectorAll("*[theme-type=style]");for(r=0;r<a.length;++r)document.head.removeChild(a[r]);var s=document.createElement("template");s.innerHTML=e;var o=s.content.children.length;for(r=0;r<o;++r){for(var i=s.content.children[r],l=i.content,c=0;c<l.childNodes.length;++c)"#comment"===l.childNodes[c].nodeName&&l.removeChild(l.childNodes[c--]);Array.from(l.childNodes).forEach(function(e){"#text"===e.nodeName&&null!==e.nodeValue.match(/^\s*$/)&&(null!==e.previousSibling&&null!==e.nextSibling||l.removeChild(e))}),void 0!==i.id&&(n.template[i.id]=l.childNodes)}(n.template.Style||[]).forEach(function(e){e.setAttribute("theme-type","style"),document.head.appendChild(e)})},a.Connect=async function(){var e=o.Theme||{};if(""===e.BaseUri||""===e.FileName)a.Parse(this.Module.Default);else{var t=e.BaseUri+e.FileName+".html";await s.Get("theme",t);0===Object.keys(n.template).length&&(l.Error("Data_Fail_Theme"),a.Parse(this.Module.Default))}i.Done("theme")},a.Load=function(e){i=e.Done,s=e.Data,o=e.Data.config,l=e.Message},t.exports=function(e){return e.call({},a,n)}},{}],22:[function(e,t,r){t.exports={Channel:null,Key:null,Data:{Uris:[]},Command:{Prefix:"!!",List:{clear:{allow:["broadcaster/0"],alias:[]},style:{allow:["broadcaster/0"],alias:[],list:{}},theme:{allow:["broadcaster/0"],alias:[],enable:!0}}},Theme:{BaseUri:"",FileName:""},Message:{Maximum:10,Timeout:20,Color:{Enable:!0,List:["rgb(255,0,0)","rgb(0,0,255)","rgb(0,128,0)","rgb(178,34,34)","rgb(255,127,80)","rgb(154,205,50)","rgb(46,139,87)","rgb(255,69,0)","rgb(218,165,32)","rgb(210,105,30)","rgb(95,158,160)","rgb(30,144,255)","rgb(255,105,180)","rgb(138,43,226)","rgb(0,255,127)"],ColorChat:["broadcaster/0","moderator/0"]},Orimg:{Prefix:"~",UriBase:"",Groups:[],Images:[]},Twip:{Enable:!0,Format:""},Link:{Enable:!0}},Error:{Maximum:5,Timeout:5,Detailed:!0,Module_Success_Connect:!0,Message_Fail_Badge:"뱃지 정보를 불러오는데 실패했습니다.",Message_Fail_Cheer:"응원 이모티콘 정보를 불러오는데 실패했습니다.",Message_Wrong_Cheer:"클라이언트 아이디가 없어 응원 정보를 읽지 않습니다.",Message_No_NormalRoot:"TemplateNormalRoot Template을 찾지 못했습니다.",Message_No_ErrorRoot:"TemplateErrorRoot와 TemplateNormalRoot Template을 찾지 못했습니다.",Data_Fail_Config:"설정 파일을 불러오는데 실패했습니다.",Data_Fail_Theme:"테마 템플릿을 불러오는데 실패했습니다.",Irc_Notice:"트위치 채팅 서버에 문제가 발생한 것 같습니다.",Irc_Wrong_Channel:"잘못된 트위치 유저 아이디입니다.",Irc_Fail_Connect:"채팅 서버와의 접속에 실패했습니다.",Irc_Close_Connect:"채팅 서버와의 연결이 종료되었습니다.",Irc_Wrong_Message:"처리되지 않는 메세지입니다."}}},{}],23:[function(e,t,r){t.exports={Id:null,Data:{SessionStorageFormat:"^data\\/config\\/*"},Irc:{Uri:"wss://irc-ws.chat.twitch.tv:443",Caps:["twitch.tv/tags","twitch.tv/commands","twitch.tv/membership"]},Message:{Emote:{Uri:"https://static-cdn.jtvnw.net/emoticons/v1/{id}/3.0"},Color:{Prefix:"ACTION ",Postfix:""},Cheer:{Uri:"https://api.twitch.tv/kraken/bits/actions?api_version=5&channel_id={id}"},Link:{youtube:{uri:"https://noembed.com/embed?url=http://youtu.be/{id}",regExp:"^(?:https?:\\/\\/)?(?:www\\.)?youtu(?:(?:be\\.com/)|(?:\\.be/))([\\w\\-=&]+)",replacer:"(attribution_link[^/]*\\/)|(embed\\/)|(watch(?:/|\\?))|(v/)"},clip:{uri:"https://noembed.com/embed?url=http://clips.twitch.tv/{id}",regExp:"^(?:https?:\\/\\/)?clips\\.twitch\\.tv(?:\\/([A-Za-z]+))(?:\\?[\\w\\-=&]*)?"},twitch:{uri:"https://noembed.com/embed?url=https://www.twitch.tv/videos/{id}",regExp:"^(?:https?:\\/\\/)?(?:[wW]{3}\\.)?twitch\\.tv\\/videos\\/([0-9]+)"}},ChannelUri:"https://badges.twitch.tv/v1/badges/channels/{id}/display",GlobalUri:"https://badges.twitch.tv/v1/badges/global/display"}}},{}]},{},[8]);</script></body>
</html>
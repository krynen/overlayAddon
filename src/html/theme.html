<!--
  template#style에는 document.head에 추가할 스타일을,
  나머지 template에는 각각의 경우에 생성할 Node Tree를 입력한다.

  virtual element는 child elements에 attribute를 추가할 때 이용
-->

<template id="Style">
  <!-- 스타일 -->
  <style type="text/css">
#Root { position:absolute; bottom:0; left:0; right:0; }
.NormalMessage { margin:2px 0; padding:3px; background:#000A; border:1px solid #FFFA; }
#ErrorRoot { position:absolute; top:0; left:0; right:0; background:#000A; }
.ErrorMessage { margin:2px 0; padding:3px; }

.NormalMessage .NameBadges { display:flex; background:linear-gradient(to right, #AAAF, #0000); }
.NormalMessage .Name {
  display:flex; flex:1; margin:auto; 
  text-shadow:    0  1px 0 #888,  1px  1px 0 #888,
                1px    0 0 #888,  1px -1px 0 #888,
                  0 -1px 0 #888, -1px -1px 0 #888,
               -1px    0 0 #888, -1px  1px 0 #888;
  padding:1px;
}
.NormalMessage .Badges { display:flex; }
.NormalMessage .Badges img { border:1px solid #FFFA; margin:auto 1px; height:18px; }

.Text {
  color:#FFFF; padding:2px 1px 1px; text-align:right;
  word-break: keep-all; word-wrap: break-word;
}

.Emote { width:56px; }
[data-emote-only="1"] .Text { text-align:center; }
.Cheermote { display:inline-block; padding:1px 3px; margin:-1px; border:1px solid #FFFA; }
.Cheermote .CheerImage img { height:1rem; }
  </style>
</template>


<template id="NormalRoot">
  <!-- 일반 메세지 최상위 Element -->
  <div theme-type="Root" id="Root" class="Root"></div>
</template>

<template id="ErrorRoot">
  <!-- 디버그 메세지 최상위 Element -->
  <div theme-type="Root" id="ErrorRoot" class="Root"></div>
</template>

<template id="NormalMessage">
  <!-- NormalRoot의 Root에 추가되는 일반 메세지 템플릿
    Root   : 최상위 element. data-emote-only="1"이 추가될 수 있음
    Name   : 유저 이름. 일반 문자열로 추가
    Badges : 뱃지 목록. 각 뱃지는 data-type="[Name]" data-tier="[Tier]"가 포함된 img element
    Text   : 메세지 문자열. 처리된 이모티콘 등도 포함됨
  -->
  <div theme-type="Root" class="Message NormalMessage">
    <div class="NameBadges">
      <span theme-type="Name" class="Name"></span>
      <span theme-type="Badges" class="Badges"></span>
    </div>
    <div theme-type="Text" class="Text"></div>
  </div>
</template>

<template id="ErrorMessage">
  <!-- ErrorRoot의 Root에 추가되는 디버그 메세지 템플릿
    Root : 최상위 element. data-type="[Type]"이 추가
    Text : 메세지 문자열.
  -->
  <div theme-type="Root" class="Message ErrorMessage">
    <span theme-type="Text" class="Text"></span>
  </div>
</template>

<template id="Emote">
  <!-- NormalMessage의 Text 내부에 추가되는 일반, 구독자 전용 이모티콘 템플릿
    Root  : 최상위 element. data-type="[Name]" date-id="[Id]"이 추가
    Image : 이모티콘 이미지가 img element로 추가
    Text  : 이미지를 표현하지 않을 경우 사용. 변환 이전 문자열
  -->
  <virtual theme-type="Root" class="Emote">
    <virtual theme-type="Image"></virtual>
  </virtual>
</template>

<template id="Cheermote">
  <!-- NormalMessage의 Text 내부에 추가되는 응원 이모티콘 템플릿
    Root  : 최상위 element. data-type="[Name]" data-tier="[Tier]" data-value="[Value]"가 추가
    Image : 응원 이모티콘 이미지가 img element로 추가
    Text  : 응원 금액 문자열
  -->
  <span theme-type="Root" class="Cheermote">
    <virtual theme-type="Image" class="CheerImage"></virtual>
    <span theme-type="Text" class="CheerValue"></span>
  </span>
</template>